/**
 * 
 * @param {string} previewerId the id of serach result preview div
 * @param {string} baseurl the url where to fetch the data
 * @param {string} targetValue the target value generated by the caller function
 */
async function LiveSearch(previewerId, baseurl, targetValue) {
    const previewer = document.getElementById(previewerId);
    if (targetValue === '') {
        previewer.innerHTML = ''
        previewer.classList.add('d-none')
    }
    else {
        previewer.classList.remove('d-none')
    }
    try {
        const url = `${baseurl}${encodeURIComponent(targetValue)}`
        const response = await fetch(url)
        const data = await response.json();
        previewer.innerHTML = ''
        if (data.length != 0) {
            data.forEach(post => {
                const cardBody = document.createElement('div');
                cardBody.classList.add('card-body');
                cardBody.innerHTML = `<a href="read-blog/${post.id}">* ${post.title}</a>`;
                previewer.appendChild(cardBody)
            });
        }
        else {
            const cardBody = document.createElement('div');
            cardBody.classList.add('card-body');
            cardBody.innerHTML = `No Data Found`;
            previewer.appendChild(cardBody)
        }

    } catch (error) {

    }
}
/**
 * @param {string} inputId is the input that trigger the livesearch function to fetch the data.
 * 
 */
function GlobalSearch(inputId, previewerId, baseurl) {
    document.getElementById(inputId).addEventListener('keyup', function (e) {
        LiveSearch(previewerId, baseurl, e.target.value);
    })
}
function LocalSearch(inputId, previewerId, baseurl) {
    document.getElementById(inputId).addEventListener('keyup', function (e) {
        LiveSearch(previewerId, baseurl, e.target.value);
    })
}

